sudo service postgresql start


sudo service postgresql status 


<!-- Box for Completion Status -->
        <div class="flex items-center">
            <div class="w-4 h-4 bg-blue-500 rounded-full mr-2"></div>
            <p class="text-sm text-gray-600">Completed</p>
        </div>


local strategy for  authetication
passport.use(new LocalStrategy({
    usernameField: "email",// this is the name of the input field in our signup
    passwordField: "password",
},
    (username, password, done) => {
        Educator.findOne({ where: { email: username } })
            .then(async function (user) {
                const result = await bcrypt.compare(password, user.password);
                if (result) {
                    return done(null, user);
                } else {
                    return done(null, false, { message: "Invalid password" });
                }
            })
            .catch((error) => {
                return done(error);
            });
        
    }))
passport.deserializeUser((id, done) => {
    Student.findByPk(id)
        .then((user) => { done(null, user) })
        .catch((error) => done(error, null))
});


//route to add pages
app.post("/page/:courseId", connectEnsureLogin.ensureLoggedIn(), async (request, response) => {
    const chapter = await Chapter.findOne({
        where: { name: request.body.chapterName },
        attributes: ['id'],
    });
    const chapterId = chapter.id
    console.log(chapterId)
    console.log(request.params.courseId)
    try {
        const page = await Page.addPage({
            name: request.body.pageName,
            chapterId: chapter.id,
        })
        console.log("new page was added")
        response.redirect(`/courseindexe/${request.params.courseId}`);
    } catch (error) {
        console.log("new page was not created")
        response.send(error)
    }
});


"pretest": "cross-env NODE_ENV=test npx sequelize-cli db:drop && cross-env NODE_ENV=test npx sequelize-cli db:create",
    "test": "cross-env NODE_ENV=test jest --detectOpenHandles",